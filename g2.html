<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Tic-Tac-Toe | Infinite Arcade</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;900&family=Inter:wght@400;600&display=swap"
        rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --bg: #120524;
            --surface: rgba(42, 20, 68, .6);
            --border: rgba(168, 85, 247, .3);
            --x: #f472b6;
            --o: #38bdf8
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box
        }

        body {
            background: var(--bg);
            color: #f8fafc;
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            user-select: none;
            overflow: hidden
        }

        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #a855f7;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: .9rem;
            z-index: 99;
            transition: .2s
        }

        .back-btn:hover {
            color: #d8b4fe;
            text-shadow: 0 0 10px #d8b4fe
        }

        /* Background blob */
        .blob {
            position: absolute;
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(168, 85, 247, 0.15) 0%, transparent 60%);
            z-index: -1;
            animation: float 8s infinite alternate
        }

        @keyframes float {
            0% {
                transform: translate(-50px, -50px)
            }

            100% {
                transform: translate(50px, 50px)
            }
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            width: 100%;
            max-width: 500px;
            z-index: 10
        }

        h1 {
            font-family: 'Outfit', sans-serif;
            font-size: 3rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 4px;
            background: linear-gradient(to right, #f472b6, #c084fc, #38bdf8);
            -webkit-background-clip: text; background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            width: 100%;
            align-items: center;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 16px 24px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, .5);
            backdrop-filter: blur(10px)
        }

        .score {
            display: flex;
            flex-direction: column;
            align-items: center
        }

        .score-label {
            font-size: .7rem;
            text-transform: uppercase;
            color: #94a3b8;
            letter-spacing: 1px
        }

        .score-val {
            font-family: 'Outfit', sans-serif;
            font-size: 2rem;
            font-weight: 900
        }

        #scoreX {
            color: var(--x);
            text-shadow: 0 0 15px rgba(244, 114, 182, .5)
        }

        #scoreO {
            color: var(--o);
            text-shadow: 0 0 15px rgba(56, 189, 248, .5)
        }

        .turn-badge {
            padding: 8px 16px;
            border-radius: 20px;
            background: rgba(255, 255, 255, .05);
            font-family: 'Outfit';
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: .3s
        }

        .turn-badge.px {
            box-shadow: inset 0 0 20px rgba(244, 114, 182, .2);
            border: 1px solid rgba(244, 114, 182, .3);
            color: var(--x)
        }

        .turn-badge.po {
            box-shadow: inset 0 0 20px rgba(56, 189, 248, .2);
            border: 1px solid rgba(56, 189, 248, .3);
            color: var(--o)
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            background: var(--surface);
            padding: 16px;
            border-radius: 24px;
            border: 1px solid var(--border);
            box-shadow: 0 20px 50px rgba(0, 0, 0, .5);
            backdrop-filter: blur(10px)
        }

        .cell {
            width: 110px;
            height: 110px;
            background: #1e0c3a;
            border: 1px solid rgba(255, 255, 255, .05);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Outfit', sans-serif;
            font-size: 5rem;
            font-weight: 900;
            cursor: pointer;
            transition: .2s;
            position: relative;
            overflow: hidden
        }

        .cell:hover:empty {
            background: rgba(255, 255, 255, .03);
            box-shadow: inset 0 0 20px rgba(255, 255, 255, .1)
        }

        .cell.x {
            color: var(--x);
            text-shadow: 0 0 20px rgba(244, 114, 182, .8);
            animation: pop .3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
        }

        .cell.o {
            color: var(--o);
            text-shadow: 0 0 20px rgba(56, 189, 248, .8);
            animation: pop .3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
        }

        @keyframes pop {
            0% {
                transform: scale(0.5);
                opacity: 0
            }

            100% {
                transform: scale(1);
                opacity: 1
            }
        }

        .win-line {
            position: absolute;
            background: #fff;
            z-index: 5;
            border-radius: 4px;
            box-shadow: 0 0 20px #fff;
            transform-origin: left center;
            animation: draw 0.4s ease-out forwards
        }

        @keyframes draw {
            0% {
                width: 0
            }

            100% {
                width: 100%
            }
        }

        .reset-btn {
            padding: 12px 32px;
            border-radius: 12px;
            border: 1px solid var(--border);
            background: var(--surface);
            color: #f8fafc;
            font-weight: 700;
            font-family: 'Outfit', sans-serif;
            font-size: 1.1rem;
            cursor: pointer;
            transition: .2s
        }

        .reset-btn:hover {
            background: rgba(168, 85, 247, .2);
            border-color: #a855f7;
            box-shadow: 0 0 20px rgba(168, 85, 247, .3);
            transform: translateY(-2px)
        }

        /* Settings overlay */
        .mode-toggle {
            display: flex;
            gap: 10px;
            margin-bottom: 20px
        }

        .toggle-btn {
            padding: 8px 16px;
            border-radius: 8px;
            background: rgba(255, 255, 255, .05);
            border: 1px solid rgba(255, 255, 255, .1);
            color: #94a3b8;
            cursor: pointer;
            font-family: 'Outfit';
            font-weight: 700;
            transition: .2s
        }

        .toggle-btn.active {
            background: rgba(168, 85, 247, .2);
            border-color: #a855f7;
            color: #fff;
            box-shadow: 0 0 15px rgba(168, 85, 247, .3)
        }
    </style>
</head>

<body>
    <div class="blob"></div>
    <a href="index.html" class="back-btn"><i class="fas fa-arrow-left"></i> Hub</a>

    <div class="container">
        <h1>TAC TOE</h1>

        <div class="mode-toggle">
            <button class="toggle-btn active" id="btn-pvp">2 Player</button>
            <button class="toggle-btn" id="btn-pve">vs AI</button>
        </div>

        <div class="status-bar">
            <div class="score">
                <div class="score-label">X Score</div>
                <div class="score-val" id="scoreX">0</div>
            </div>
            <div class="turn-badge px" id="turnBadge"><i class="fas fa-play"></i> P1 (X)</div>
            <div class="score">
                <div class="score-label">O Score</div>
                <div class="score-val" id="scoreO">0</div>
            </div>
        </div>

        <div class="grid" id="board" style="position:relative">
            <div class="cell" data-idx="0"></div>
            <div class="cell" data-idx="1"></div>
            <div class="cell" data-idx="2"></div>
            <div class="cell" data-idx="3"></div>
            <div class="cell" data-idx="4"></div>
            <div class="cell" data-idx="5"></div>
            <div class="cell" data-idx="6"></div>
            <div class="cell" data-idx="7"></div>
            <div class="cell" data-idx="8"></div>
        </div>

        <button class="reset-btn" id="resetBtn">Restart Match</button>
    </div>

    <script>
        let board = Array(9).fill(null);
        let xTurn = true;
        let isPvP = true;
        let scores = { X: 0, O: 0 };
        let gameOver = false;
        let winLineEl = null;

        const cells = document.querySelectorAll('.cell');
        const tb = document.getElementById('turnBadge');

        document.getElementById('btn-pvp').onclick = () => setMode(true);
        document.getElementById('btn-pve').onclick = () => setMode(false);
        document.getElementById('resetBtn').onclick = resetBoard;

        function setMode(pvp) {
            isPvP = pvp;
            document.getElementById('btn-pvp').className = `toggle-btn ${pvp ? 'active' : ''}`;
            document.getElementById('btn-pve').className = `toggle-btn ${!pvp ? 'active' : ''}`;
            scores = { X: 0, O: 0 }; updateScores(); resetBoard();
        }

        cells.forEach(c => c.onclick = () => {
            if (gameOver || c.innerHTML !== '') return;
            const idx = +c.dataset.idx;
            makeMove(idx, xTurn ? 'X' : 'O');

            if (!gameOver && !isPvP && !xTurn) {
                // AI turn
                setTimeout(() => {
                    let empty = board.map((v, i) => v === null ? i : -1).filter(v => v !== -1);
                    if (empty.length > 0) {
                        // simple random AI for classic feel
                        const choice = empty[Math.floor(Math.random() * empty.length)];
                        makeMove(choice, 'O');
                    }
                }, 400);
            }
        });

        function makeMove(i, p) {
            board[i] = p;
            cells[i].innerHTML = p;
            cells[i].className = `cell ${p.toLowerCase()}`;
            checkWin();
            if (!gameOver) {
                xTurn = !xTurn;
                tb.innerHTML = xTurn ? '<i class="fas fa-play"></i> P1 (X)' : (isPvP ? '<i class="fas fa-play"></i> P2 (O)' : '<i class="fas fa-robot"></i> AI (O)');
                tb.className = `turn-badge ${xTurn ? 'px' : 'po'}`;
            }
        }

        function checkWin() {
            const wins = [[0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6], [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]];
            for (let w of wins) {
                const [a, b, c] = w;
                if (board[a] && board[a] === board[b] && board[a] === board[c]) {
                    gameOver = true;
                    scores[board[a]]++; updateScores();
                    tb.innerHTML = `<i class="fas fa-trophy"></i> ${board[a]} Wins!`;
                    drawWinLine(w);
                    return;
                }
            }
            if (!board.includes(null)) {
                gameOver = true;
                tb.innerHTML = '<i class="fas fa-handshake"></i> Draw';
                tb.className = 'turn-badge';
                tb.style.borderColor = 'gray'; tb.style.color = 'gray'; tb.style.boxShadow = 'none';
            }
        }

        function updateScores() {
            document.getElementById('scoreX').textContent = scores.X;
            document.getElementById('scoreO').textContent = scores.O;
        }

        function resetBoard() {
            board = Array(9).fill(null); xTurn = true; gameOver = false;
            cells.forEach(c => { c.innerHTML = ''; c.className = 'cell'; });
            tb.innerHTML = '<i class="fas fa-play"></i> P1 (X)'; tb.className = 'turn-badge px'; tb.style = '';
            if (winLineEl) { winLineEl.remove(); winLineEl = null; }
        }

        function drawWinLine(w) {
            // 012=row1, 345=row2, 678=row3, 036=col1, 147=col2, 258=col3, 048=dg1, 246=dg2
            const grid = document.getElementById('board');
            winLineEl = document.createElement('div');
            winLineEl.className = 'win-line';

            // Hardcoded logic for a 3x3 110px grid with 12px gap
            const size = 110, gap = 12, pad = 16, tSize = size * 3 + gap * 2;
            // ... basic mapping to css positions
            winLineEl.style.height = '6px';
            winLineEl.style.width = `${tSize}px`;
            winLineEl.style.left = `${pad}px`;
            winLineEl.style.boxShadow = `0 0 20px ${board[w[0]] === 'X' ? '#f472b6' : '#38bdf8'}`;
            winLineEl.style.background = board[w[0]] === 'X' ? '#f472b6' : '#38bdf8';

            if (w[0] === 0 && w[1] === 1) { winLineEl.style.top = `${pad + size / 2 - 3}px`; }
            else if (w[0] === 3 && w[1] === 4) { winLineEl.style.top = `${pad + size + gap + size / 2 - 3}px`; }
            else if (w[0] === 6 && w[1] === 7) { winLineEl.style.top = `${pad + size * 2 + gap * 2 + size / 2 - 3}px`; }
            else if (w[0] === 0 && w[1] === 3) { winLineEl.style.transform = `rotate(90deg) translate(${pad + size / 2}px, -${size / 2}px)`; winLineEl.style.top = pad + 'px'; winLineEl.style.left = pad + 'px'; } // Simplified hack
            else if (w[0] === 1 && w[1] === 4) { winLineEl.style.transform = `rotate(90deg) translate(${pad + size / 2}px, -${size / 2 + size + gap}px)`; winLineEl.style.top = pad + 'px'; winLineEl.style.left = pad + 'px'; }
            else if (w[0] === 2 && w[1] === 5) { winLineEl.style.transform = `rotate(90deg) translate(${pad + size / 2}px, -${size / 2 + size * 2 + gap * 2}px)`; winLineEl.style.top = pad + 'px'; winLineEl.style.left = pad + 'px'; }
            else if (w[0] === 0 && w[2] === 8) { winLineEl.style.transform = `rotate(45deg)`; winLineEl.style.width = `${Math.sqrt(tSize * tSize * 2)}px`; winLineEl.style.top = `${pad}px`; winLineEl.style.left = `${pad}px`; }
            else if (w[0] === 2 && w[2] === 6) { winLineEl.style.transform = `rotate(135deg)`; winLineEl.style.transformOrigin = `center left`; winLineEl.style.width = `${Math.sqrt(tSize * tSize * 2)}px`; winLineEl.style.top = `${pad}px`; winLineEl.style.left = `${pad + tSize}px`; }

            grid.appendChild(winLineEl);
        }
    </script>
</body>

</html>
