<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Four | Infinite Arcade</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;900&family=Inter:wght@400;600&display=swap"
        rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --bg: #0A0A0A;
            --surface: rgba(20, 20, 20, .8);
            --border: rgba(255, 255, 255, .1);
            --p1: #f43f5e;
            --p2: #eab308;
            --board: #1e3a8a
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box
        }

        body {
            background: var(--bg);
            color: #f8fafc;
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            user-select: none;
            background-image: linear-gradient(to bottom, #0A0A0A, #111827)
        }

        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #94a3b8;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: .9rem;
            z-index: 99;
            transition: .2s
        }

        .back-btn:hover {
            color: #fff;
            text-shadow: 0 0 10px #fff
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            width: 100%;
            max-width: 700px;
            padding: 20px
        }

        h1 {
            font-family: 'Outfit', sans-serif;
            font-size: 3rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #fff;
            text-shadow: 0 0 20px rgba(255, 255, 255, .2);
            text-align: center
        }

        .hud {
            display: flex;
            justify-content: space-between;
            width: 100%;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 16px 32px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, .5);
            backdrop-filter: blur(10px);
            align-items: center
        }

        .score-block {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px
        }

        .score-label {
            font-size: .8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 700
        }

        .score-label.p1 {
            color: var(--p1)
        }

        .score-label.p2 {
            color: var(--p2)
        }

        .score-val {
            font-family: 'Outfit';
            font-size: 2rem;
            font-weight: 900
        }

        .turn-indicator {
            padding: 8px 24px;
            border-radius: 20px;
            font-family: 'Outfit';
            font-weight: 700;
            font-size: 1.2rem;
            transition: .3s;
            display: flex;
            align-items: center;
            gap: 10px
        }

        .turn-indicator.p1 {
            background: rgba(244, 63, 94, .1);
            color: var(--p1);
            border: 1px solid rgba(244, 63, 94, .3);
            box-shadow: 0 0 20px rgba(244, 63, 94, .2)
        }

        .turn-indicator.p2 {
            background: rgba(234, 179, 8, .1);
            color: var(--p2);
            border: 1px solid rgba(234, 179, 8, .3);
            box-shadow: 0 0 20px rgba(234, 179, 8, .2)
        }

        .board-wrapper {
            position: relative;
            margin-top: 20px
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            background: var(--board);
            padding: 14px;
            border-radius: 16px;
            border: 2px solid #2563eb;
            box-shadow: 0 20px 50px rgba(0, 0, 0, .8), inset 0 0 30px rgba(37, 99, 235, .5);
            z-index: 2;
            position: relative
        }

        .col {
            display: flex;
            flex-direction: column;
            gap: 10px;
            cursor: pointer;
            padding: 4px;
            border-radius: 30px;
            transition: .2s
        }

        .col:hover {
            background: rgba(255, 255, 255, .05)
        }

        .cell {
            width: 60px;
            height: 60px;
            background: #0A0A0A;
            border-radius: 50%;
            box-shadow: inset 0 4px 10px rgba(0, 0, 0, .8);
            position: relative;
            overflow: hidden;
            transition: background 0.3s
        }

        .cell::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, .05)
        }

        /* Tokens */
        .token {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            z-index: 1;
            pointer-events: none;
            transition: transform 0.5s cubic-bezier(0.5, 0, 0.2, 1);
            box-shadow: inset -5px -5px 15px rgba(0, 0, 0, .5), inset 5px 5px 15px rgba(255, 255, 255, .3), 0 5px 15px rgba(0, 0, 0, .5)
        }

        .token.p1 {
            background: radial-gradient(circle at 30% 30%, #fb7185, #e11d48);
            box-shadow: inset -5px -5px 15px rgba(0, 0, 0, .5), inset 5px 5px 15px rgba(255, 255, 255, .3), 0 0 20px rgba(225, 29, 72, .5)
        }

        .token.p2 {
            background: radial-gradient(circle at 30% 30%, #fef08a, #ca8a04);
            box-shadow: inset -5px -5px 15px rgba(0, 0, 0, .5), inset 5px 5px 15px rgba(255, 255, 255, .3), 0 0 20px rgba(202, 138, 4, .5)
        }

        .win-highlight {
            animation: pulse 1s infinite alternate
        }

        @keyframes pulse {
            0% {
                transform: scale(1)
            }

            100% {
                transform: scale(1.15)
            }
        }

        .btn-wrap {
            margin-top: 20px;
            display: flex;
            gap: 16px
        }

        .btn {
            padding: 12px 30px;
            border-radius: 12px;
            border: 1px solid var(--border);
            background: var(--surface);
            color: #fff;
            font-family: 'Outfit';
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: .2s
        }

        .btn:hover {
            background: rgba(255, 255, 255, .1);
            border-color: #fff
        }

        .overlay {
            position: fixed;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(10, 10, 10, .9);
            backdrop-filter: blur(8px);
            z-index: 50
        }

        .overlay.hidden {
            display: none
        }

        .overlay h2 {
            font-family: 'Outfit', sans-serif;
            font-size: 4rem;
            font-weight: 900;
            margin-bottom: 10px
        }
    </style>
</head>

<body>
    <a href="index.html" class="back-btn"><i class="fas fa-arrow-left"></i> Hub</a>

    <div class="container">
        <h1>NEON FOUR</h1>

        <div class="hud">
            <div class="score-block">
                <div class="score-label p1">Red (P1)</div>
                <div class="score-val" id="s1" style="color:var(--p1)">0</div>
            </div>
            <div class="turn-indicator p1" id="turnInfo"><i class="fas fa-circle"></i> P1 Turn</div>
            <div class="score-block">
                <div class="score-label p2">Yellow (P2)</div>
                <div class="score-val" id="s2" style="color:var(--p2)">0</div>
            </div>
        </div>

        <div class="board-wrapper">
            <div id="tokensLayer"
                style="position:absolute;inset:0;pointer-events:none;z-index:1;padding:14px;left:4px;top:4px"></div>
            <div class="grid" id="board">
                <!-- 7 columns, 6 rows -->
            </div>
        </div>

        <div class="btn-wrap">
            <button class="btn" onclick="init()"><i class="fas fa-redo"></i> Restart Game</button>
        </div>
    </div>

    <div class="overlay hidden" id="overlay">
        <h2 id="ovTitle">Game Over</h2>
        <p id="ovDesc" style="color:#94a3b8;font-size:1.2rem;margin-bottom:30px"></p>
        <button class="btn" onclick="init()">Play Again</button>
    </div>

    <script>
        const ROWS = 6, COLS = 7;
        let grid = [], turn = 1, running = false;
        let scores = { 1: 0, 2: 0 };
        const b = document.getElementById('board');
        const tl = document.getElementById('tokensLayer');

        // Create board
        for (let c = 0; c < COLS; c++) {
            const col = document.createElement('div');
            col.className = 'col';
            col.dataset.c = c;
            col.onclick = () => drop(c);
            for (let r = 0; r < ROWS; r++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.id = `c-${r}-${c}`;
                col.appendChild(cell);
            }
            b.appendChild(col);
        }

        function init() {
            grid = Array(ROWS).fill(null).map(() => Array(COLS).fill(0));
            turn = 1; running = true;
            updateHUD();
            tl.innerHTML = '';
            document.getElementById('overlay').classList.add('hidden');
            document.querySelectorAll('.cell').forEach(c => c.classList.remove('win-highlight'));
        }

        function drop(c) {
            if (!running) return;
            let r = ROWS - 1;
            while (r >= 0 && grid[r][c] !== 0) r--;
            if (r < 0) return; // Full col

            grid[r][c] = turn;

            // Animate token
            const tk = document.createElement('div');
            tk.className = `token ${turn === 1 ? 'p1' : 'p2'}`;
            // calculate position:
            // Cell width 60, col gap 10 = 70px per col
            // padding 14px internally ignored because tokenLayer is offset
            tk.style.left = `${c * 70}px`;
            tk.style.top = `-100px`;
            tl.appendChild(tk);

            // Animate drop
            setTimeout(() => {
                tk.style.top = `${r * 70}px`;
            }, 10);

            const winMap = checkWin(r, c);
            if (winMap) {
                running = false;
                scores[turn]++;
                document.getElementById(`s${turn}`).textContent = scores[turn];

                setTimeout(() => {
                    // highlight
                    // find the tokens and add pulse class
                    let all = Array.from(tl.children);
                    winMap.forEach(pos => {
                        // Find token in pos (lazy approach but works: position based)
                        let expectL = pos[1] * 70 + 'px';
                        let expectT = pos[0] * 70 + 'px';
                        let foundTk = all.find(t => t.style.left === expectL && t.style.top === expectT);
                        if (foundTk) foundTk.classList.add('win-highlight');
                    });

                    setTimeout(() => {
                        let color = turn === 1 ? 'var(--p1)' : 'var(--p2)';
                        document.getElementById('ovTitle').innerHTML = `<span style="color:${color}">Player ${turn} Wins!</span>`;
                        document.getElementById('overlay').classList.remove('hidden');
                    }, 1000);
                }, 500);
            } else if (grid.flat().every(v => v !== 0)) {
                running = false;
                setTimeout(() => {
                    document.getElementById('ovTitle').innerHTML = `<span style="color:#fff">Draw!</span>`;
                    document.getElementById('overlay').classList.remove('hidden');
                }, 600);
            } else {
                turn = turn === 1 ? 2 : 1;
                updateHUD();
            }
        }

        function updateHUD() {
            const ti = document.getElementById('turnInfo');
            ti.className = `turn-indicator ${turn === 1 ? 'p1' : 'p2'}`;
            ti.innerHTML = `<i class="fas fa-circle"></i> P${turn} Turn`;
        }

        function checkWin(r, c) {
            const dirs = [[0, 1], [1, 0], [1, 1], [1, -1]];
            let p = grid[r][c];

            for (let [dr, dc] of dirs) {
                let count = 1;
                let map = [[r, c]];
                // forward
                let nr = r + dr, nc = c + dc;
                while (nr >= 0 && nr < ROWS && nc >= 0 && nc < COLS && grid[nr][nc] === p) { map.push([nr, nc]); count++; nr += dr; nc += dc; }
                // backward
                nr = r - dr; nc = c - dc;
                while (nr >= 0 && nr < ROWS && nc >= 0 && nc < COLS && grid[nr][nc] === p) { map.push([nr, nc]); count++; nr -= dr; nc -= dc; }

                if (count >= 4) return map;
            }
            return null;
        }

        init();
    </script>
</body>

</html>